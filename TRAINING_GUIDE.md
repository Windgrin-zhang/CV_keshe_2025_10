# è®­ç»ƒç³»ç»Ÿä½¿ç”¨æŒ‡å—

## âœ… é‡æ„å®Œæˆ

å·²æŒ‰ä½ çš„è¦æ±‚å®Œæˆæ‰€æœ‰ä¿®æ”¹ï¼š

### 1. âœ… å¯è§†åŒ–è¾“å‡º
- ç”Ÿæˆè®­ç»ƒæ›²çº¿å›¾ï¼ˆå‡†ç¡®ç‡å’ŒæŸå¤±ï¼‰
- å­¦ä¹ ç‡å˜åŒ–æ›²çº¿
- å†…å­˜ä½¿ç”¨ç›‘æ§
- YOLOé£æ ¼çš„è¾“å‡ºæ ¼å¼

### 2. âœ… è¶…å‚æ•°é…ç½®
- å·²åœ¨config.pyä¸­è®¾ç½®æ¨èçš„è¶…å‚æ•°
- å­¦ä¹ ç‡: 0.1 (CIFARæ ‡å‡†)
- æ‰¹é‡å¤§å°: 128
- æƒé‡è¡°å‡: 5e-4
- å­¦ä¹ ç‡è¡°å‡: milestones=[60, 80], gamma=0.1

### 3. âœ… Bashè¾“å‡º
æ¯è½®è¾“å‡ºåŒ…æ‹¬ï¼š
```
Epoch   1/100: train_loss=2.5362 train_acc=19.61% val_loss=1.9650 val_acc=23.62% lr=0.100000 mem=1162MB time=7.1s
```
- è®­ç»ƒ/éªŒè¯å‡†ç¡®ç‡
- è®­ç»ƒ/éªŒè¯æŸå¤±
- å­¦ä¹ ç‡
- å†…å­˜å ç”¨
- è®­ç»ƒæ—¶é—´

### 4. âœ… è¾“å‡ºbest.pt
- è‡ªåŠ¨ä¿å­˜best.ptï¼ˆæœ€ä½³æ¨¡å‹ï¼‰
- è‡ªåŠ¨ä¿å­˜last.ptï¼ˆæœ€æ–°æ¨¡å‹ï¼‰
- æ¯10ä¸ªepochä¿å­˜ä¸€æ¬¡æ£€æŸ¥ç‚¹

### 5. âœ… å‡½æ•°å°è£…
train.pyåªåŒ…å«ï¼š
- ä¸»å‡½æ•°
- è¶…å‚è®¾ç½®
- æ¨¡å‹é€‰æ‹©
- è¾“å…¥è¾“å‡ºè·¯å¾„

### 6. âœ… æ•°æ®åˆ’åˆ†é…ç½®
åœ¨config.pyä¸­ï¼š
```python
TRAIN_VAL_SPLIT = {
    "train_ratio": 0.8,  # 80%è®­ç»ƒ
    "val_ratio": 0.2,     # 20%éªŒè¯
}
```

### 7. âœ… æ¨¡å—åŒ–é‡æ„
```python
script/
â”œâ”€â”€ train.py       # ä¸»å‡½æ•°ï¼ˆç²¾ç®€ï¼‰
â”œâ”€â”€ config.py      # é…ç½®
â”œâ”€â”€ data_loader.py # æ•°æ®åŠ è½½
â”œâ”€â”€ model.py       # æ¨¡å‹æ„å»º
â”œâ”€â”€ trainer.py     # è®­ç»ƒé€»è¾‘
â”œâ”€â”€ logger.py      # æ—¥å¿—ï¼ˆYOLOé£æ ¼ï¼‰
â”œâ”€â”€ utils.py       # å¯è§†åŒ–
â””â”€â”€ evaluate.py    # è¯„ä¼°
```

### 8. âœ… è¾“å‡ºæ–‡ä»¶å¤¹ç»Ÿä¸€
- æ‰€æœ‰è¾“å‡ºåœ¨ `output/` ç›®å½•
- æ ¼å¼ï¼š`output/{model}_{dataset}/`
- åŒ…å«ï¼šbest.pt, last.pt, è®­ç»ƒæ—¥å¿—, æŒ‡æ ‡JSON, å¯è§†åŒ–å›¾è¡¨

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### å¿«é€Ÿå¼€å§‹
```bash
cd script
python train.py --epochs 10 --batch_size 64
```

### å®Œæ•´è®­ç»ƒ
```bash
python train.py --model resnet50 --dataset cifar10 --epochs 100 --batch_size 128 --lr 0.1
```

### æŸ¥çœ‹ç»“æœ
```bash
ls output/resnet18_cifar10/
# æŸ¥çœ‹è®­ç»ƒæ—¥å¿—
cat output/resnet18_cifar10/training.log
# æŸ¥çœ‹æŒ‡æ ‡
cat output/resnet18_cifar10/metrics.json
```

## ğŸ“Š è¾“å‡ºæ–‡ä»¶

æ¯æ¬¡è®­ç»ƒä¼šåœ¨outputç›®å½•ç”Ÿæˆï¼š

1. **best.pt** - æœ€ä½³æ¨¡å‹æƒé‡
2. **last.pt** - æœ€æ–°æ¨¡å‹æƒé‡
3. **training.log** - å®Œæ•´è®­ç»ƒæ—¥å¿—
4. **metrics.json** - æ¯è½®æŒ‡æ ‡ï¼ˆJSONæ ¼å¼ï¼‰
5. **training_curves.png** - å‡†ç¡®ç‡å’ŒæŸå¤±æ›²çº¿
6. **lr_curve.png** - å­¦ä¹ ç‡æ›²çº¿
7. **memory_usage.png** - å†…å­˜ä½¿ç”¨æ›²çº¿

## ğŸ¯ æ–‡ä»¶ç»“æ„

### config.py
- é…ç½®æ‰€æœ‰è¶…å‚æ•°
- ä¿®æ”¹æ¨¡å‹å’Œæ•°æ®é€‰æ‹©
- è°ƒæ•´è®­ç»ƒ/éªŒè¯æ¯”ä¾‹

### train.pyï¼ˆä¸»å‡½æ•°ï¼‰
```python
def main():
    args = parse_args()  # è§£æå‚æ•°
    device = torch.device(...)  # è®¾å¤‡
    train_loader, val_loader, test_loader = load_cifar_dataset(...)  # æ•°æ®
    model = build_model(...)  # æ¨¡å‹
    trainer = Trainer(...)  # è®­ç»ƒå™¨
    trainer.train()  # è®­ç»ƒ
```

### å…¶ä»–æ¨¡å—
- model.py: æ¨¡å‹æ„å»º
- trainer.py: è®­ç»ƒå¾ªç¯
- logger.py: YOLOé£æ ¼æ—¥å¿—
- utils.py: å¯è§†åŒ–
- data_loader.py: æ•°æ®åŠ è½½

## ğŸ’¡ å…³é”®æ”¹è¿›

1. **ç»Ÿä¸€è¾“å‡ºç›®å½•**ï¼šå…¨éƒ¨åœ¨outputæ–‡ä»¶å¤¹
2. **YOLOé£æ ¼æ—¥å¿—**ï¼šç®€æ´æ¸…æ™°çš„è®­ç»ƒè¾“å‡º
3. **å®Œæ•´å¯è§†åŒ–**ï¼šæ›²çº¿å›¾ã€å­¦ä¹ ç‡ã€å†…å­˜
4. **æ¨¡å—åŒ–è®¾è®¡**ï¼šæ¯ä¸ªåŠŸèƒ½ç‹¬ç«‹æ–‡ä»¶
5. **æœ€ä½³æ¨¡å‹ä¿å­˜**ï¼šè‡ªåŠ¨ä¿å­˜best.pt
6. **é…ç½®åŒ–ç®¡ç†**ï¼šæ‰€æœ‰å‚æ•°åœ¨config.py
7. **æ•°æ®æ¯”ä¾‹å¯è°ƒ**ï¼štrain/valæ¯”ä¾‹å¯é…ç½®

## ğŸ“ ä½¿ç”¨å»ºè®®

1. **é¦–æ¬¡è¿è¡Œ**ï¼šä½¿ç”¨å°‘é‡epochæµ‹è¯•
2. **å®Œæ•´è®­ç»ƒ**ï¼šä½¿ç”¨100 epochs
3. **æŸ¥çœ‹ç»“æœ**ï¼šæ£€æŸ¥best.ptå’Œå¯è§†åŒ–å›¾è¡¨
4. **è°ƒæ•´å‚æ•°**ï¼šåœ¨config.pyä¸­ä¿®æ”¹è¶…å‚æ•°

## ğŸ“ˆ é¢„æœŸæ€§èƒ½

- CIFAR-10: 85-95% å‡†ç¡®ç‡
- CIFAR-100: 70-80% å‡†ç¡®ç‡

è®­ç»ƒæ—¶é•¿ï¼ˆ100 epochsï¼‰ï¼š
- ResNet18: ~2-3å°æ—¶
- ResNet50: ~5-6å°æ—¶

